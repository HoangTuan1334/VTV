# üé® C·∫•u h√¨nh trang v√† layouts - S·ª¨ D·ª§NG K√çCH TH∆Ø·ªöC CHU·∫®N GEMINI
PAGE_W, PAGE_H = 2100, 2970  # A4 portrait (300 DPI)
MARGIN = 50
GAP = 20

# ‚≠ê K√çCH TH∆Ø·ªöC CHU·∫®N GEMINI (kh√¥ng c·∫ßn resize)
GEMINI_SIZES = {
    "1:1": (1024, 1024),
    "2:3": (832, 1248),
    "3:2": (1248, 832),
    "3:4": (864, 1152),
    "4:3": (1152, 864),
    "4:5": (896, 1152),
    "5:4": (1152, 896),
    "9:16": (768, 1344),
    "16:9": (1344, 768),
    "21:9": (1536, 672),
}

# ‚≠ê LAYOUTS M·ªöI: CH·ªà D√ôNG K√çCH TH∆Ø·ªöC CHU·∫®N GEMINI - C√ÇN ƒê·ªêI & H√ÄI H√íA
# M·ªói layout: 4-6 panels, k√≠ch th∆∞·ªõc ch√≠nh x√°c t·ª´ GEMINI_SIZES
# C√°c panel ƒë∆∞·ª£c b·ªë tr√≠ c√¢n ƒë·ªëi, d·ªÖ nh√¨n, v·ª´a kh√≠t trong trang A4 (2100√ó2970)
layouts = {
    # "layout_1": [  # 4 panels - 2x2 grid vu√¥ng ƒë·ªÅu (1:1)
    #     (MARGIN, MARGIN, 1024, 1024),
    #     (MARGIN + 1024 + GAP, MARGIN, 1024, 1024),
    #     (MARGIN, MARGIN + 1024 + GAP, 1024, 1024),
    #     (MARGIN + 1024 + GAP, MARGIN + 1024 + GAP, 1024, 1024),
    # ],
    
    "layout_2": [  # 5 panels - 1 wide + 2 middle + 2 bottom
        (MARGIN, MARGIN, 2000, 880),                    # Panel 1: wide cinematic (16:9)
        (MARGIN, MARGIN + 870 + GAP, 1000, 1000),       # Panel 2: left middle (1:1)
        (MARGIN + 1000 + GAP, MARGIN + 870 + GAP, 1000, 1000),  # Panel 3: right middle (1:1)
        (MARGIN, MARGIN + 870 + 1000 + 2*GAP, 1000, 1000),      # Panel 4: bottom left (1:1)
        (MARGIN + 1000 + GAP, MARGIN + 870 + 1000 + 2*GAP, 1000, 1000),  # Panel 5: bottom right (1:1)
    ],
    
    "layout_5": [  # 6 panels - 1 wide + 2 big + 3 bottom taller
        (MARGIN, MARGIN, 2000, 850),  # 1Ô∏è‚É£ top wide (16:9)

        # H√†ng gi·ªØa: 2 khung l·ªõn
        (MARGIN, MARGIN + 850 + GAP, 980, 1050),  # 2Ô∏è‚É£ large left (1:1)
        (MARGIN + 980 + GAP, MARGIN + 850 + GAP, 980, 1050),  # 3Ô∏è‚É£ large right (1:1)

        # H√†ng cu·ªëi: 3 khung d√†i h∆°n ƒë·ªÉ c√¢n A4
        (MARGIN, MARGIN + 850 + 1050 + 2*GAP, 640, 900),  # 4Ô∏è‚É£ bottom-left (1:1.4)
        (MARGIN + 640 + GAP, MARGIN + 850 + 1050 + 2*GAP, 640, 900),  # 5Ô∏è‚É£ bottom-mid
        (MARGIN + 2*(640 + GAP), MARGIN + 850 + 1050 + 2*GAP, 640, 900),  # 6Ô∏è‚É£ bottom-right
    ],




        
    "layout_4": [  # 6 panels - 1 wide + 3 mid + 2 bottom
        (MARGIN, MARGIN, 2000, 850),  # 1Ô∏è‚É£ wide cinematic
        (MARGIN, MARGIN + 850 + GAP, 640, 980),  # 2Ô∏è‚É£ mid-left
        (MARGIN + 640 + GAP, MARGIN + 850 + GAP, 640, 980),  # 3Ô∏è‚É£ mid-center
        (MARGIN + 2*(640 + GAP), MARGIN + 850 + GAP, 640, 980),  # 4Ô∏è‚É£ mid-right
        (MARGIN, MARGIN + 850 + 980 + 2*GAP, 980, 980),  # 5Ô∏è‚É£ bottom-left
        (MARGIN + 980 + GAP, MARGIN + 850 + 980 + 2*GAP, 980, 980),  # 6Ô∏è‚É£ bottom-right
    ],
        
    "layout_6": [  # 3 panels - ultra cinematic top + 2 bottom deep
        (MARGIN, MARGIN, 2000, 1200),  # 1Ô∏è‚É£ top cinematic (3:2 - chi·∫øm ~40%)
        (MARGIN, MARGIN + 1200 + GAP, 990, 1650),  # 2Ô∏è‚É£ bottom-left (r·∫•t d√†i)
        (MARGIN + 980 + GAP, MARGIN + 1200 + GAP, 990, 1650),  # 3Ô∏è‚É£ bottom-right (r·∫•t d√†i)
    ],


    "layout_7": [  # 4 panels - artistic overlap & dynamic layout
        (MARGIN, MARGIN, 2000, 900),  # 1Ô∏è‚É£ top cinematic (16:9)
        (MARGIN, MARGIN + 920 + GAP, 980, 1020),  # 2Ô∏è‚É£ middle-left (vu√¥ng)
        (MARGIN + 970 + GAP, MARGIN + 940, 1020, 1020),  # 3Ô∏è‚É£ middle-right (tr·ªìi l√™n, ƒë√® nh·∫π khung 1)
        (MARGIN, MARGIN + 900 + 1090 + 2*GAP, 2000, 850),  # 4Ô∏è‚É£ bottom-wide (21:9, ph·ªß to√†n trang)
    ],


}

print("=" * 70)
print("‚úÖ LAYOUTS M·ªöI - D√ôNG K√çCH TH∆Ø·ªöC CHU·∫®N GEMINI")
print("=" * 70)
print(f"üìå T·∫•t c·∫£ {len(layouts)} layouts ƒë·ªÅu d√πng k√≠ch th∆∞·ªõc chu·∫©n")
print(f"üìå KH√îNG C·∫¶N RESIZE - Gemini sinh ƒë√∫ng k√≠ch th∆∞·ªõc ngay t·ª´ ƒë·∫ßu")
print("=" * 70)
for name, panels in layouts.items():
    print(f"   {name}: {len(panels)} panels")
    for i, (x, y, w, h) in enumerate(panels):
        ratio = f"{w}√ó{h}"
        print(f"      Panel {i+1}: {ratio}px")
print("=" * 70)





# üñºÔ∏è T·∫°o preview layouts
def create_layout_preview(layout_name, panels, save_dir="layout_previews"):
    """T·∫°o ·∫£nh preview cho layout"""
    os.makedirs(save_dir, exist_ok=True)
    
    img = Image.new("RGB", (PAGE_W, PAGE_H), "white")
    draw = ImageDraw.Draw(img)
    
    # V·∫Ω c√°c khung
    for i, (x, y, w, h) in enumerate(panels):
        # V·∫Ω vi·ªÅn khung
        draw.rectangle([x, y, x+w, y+h], outline="black", width=8)
        
        # V·∫Ω s·ªë th·ª© t·ª±
        center_x = x + w // 2
        center_y = y + h // 2
        draw.text((center_x, center_y), str(i+1), fill="red", anchor="mm", font_size=100)
    
    # L∆∞u ·∫£nh
    img_path = os.path.join(save_dir, f"{layout_name}.png")
    img.save(img_path)
    return img_path

# T·∫°o preview cho t·∫•t c·∫£ layouts
for name, panels in layouts.items():
    create_layout_preview(name, panels)

print("‚úÖ ƒê√£ t·∫°o preview cho t·∫•t c·∫£ layouts trong folder 'layout_previews'")